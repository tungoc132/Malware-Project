. $PSScriptRoot\Shared.ps1

InModuleScope posh-git {
    Describe ("{2}{1}{0}{3}" -f'h T','ranc','Get-GitB','ests') {
        Context ("{5}{1}{2}{3}{0}{6}{4}"-f 'GIT_DIR T','tBr','a','nch ','sts','Get-Gi','e') {
            It ("{3}{5}{4}{0}{8}{7}{2}{6}{9}{1}" -f'DIR','o','wh','Return','T_','s GI','en in .git',' ','!',' dir of the rep') {
                $repoRoot = (Resolve-Path $PSScriptRoot\..).Path
                Set-Location $repoRoot\.git -ErrorAction Stop
                Get-GitBranch | Should BeExactly ("{0}{1}{2}"-f 'G','IT_D','IR!')
            }
            It ("{11}{2}{4}{10}{6}{18}{8}{15}{9}{13}{7}{0}{16}{14}{3}{5}{1}{17}{12}" -f'older ',' th','ur','gi','ns c','t dir of','re','f',' path when ','n a ch','or','Ret','o','ild ','the .','i','of ','e rep','ct') {
                $repoRoot = (Resolve-Path $PSScriptRoot\..).Path
                Set-Location $repoRoot\.git\hooks -ErrorAction Stop
                Get-GitBranch | Should BeExactly ("{0}{2}{1}" -f 'GIT_','!','DIR')
            }
        }
    }
}